"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4728],{19548:(t,r,e)=>{e.r(r),e.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var n=e(74848),o=e(28453);const s={title:"Set docker proxy",tags:["docker","proxy","container"]},a="How to set proxy for docker",i={permalink:"/blog/2023/12/26/docker-proxy",source:"@site/blog/2023/12-26-docker-proxy.md",title:"Set docker proxy",description:"1. create/edit user docker configuration:",date:"2023-12-26T00:00:00.000Z",tags:[{inline:!0,label:"docker",permalink:"/blog/tags/docker"},{inline:!0,label:"proxy",permalink:"/blog/tags/proxy"},{inline:!0,label:"container",permalink:"/blog/tags/container"}],readingTime:1.26,hasTruncateMarker:!1,authors:[],frontMatter:{title:"Set docker proxy",tags:["docker","proxy","container"]},unlisted:!1,prevItem:{title:"Remove snapd on ubuntu",permalink:"/blog/2024/05/20/remove-snapd"},nextItem:{title:"gdb continue until if condition hit",permalink:"/blog/2023/08/09/gdb-break-if"}},l={authorsImageUrls:[]},c=[];function p(t){const r={code:"code",li:"li",ol:"ol",pre:"pre",ul:"ul",...(0,o.R)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"create/edit user docker configuration:"}),"\n"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"sudo vim /etc/docker/daemon.json\n"})}),"\n",(0,n.jsxs)(r.ol,{start:"2",children:["\n",(0,n.jsx)(r.li,{children:"set up proxy"}),"\n"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-conf",children:'{\r\n  "proxies": {\r\n    "http-proxy": "http://proxy.example.com:80",\r\n    "https-proxy": "https://proxy.example.com:443",\r\n    "no-proxy": "*.test.example.com,.example.org"\r\n  }\r\n}\n'})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"This is a full example of the allowed configuration options on Linux:"}),"\n"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-json",children:'{\r\n\t"allow-nondistributable-artifacts": [],\r\n\t"api-cors-header": "",\r\n\t"authorization-plugins": [],\r\n\t"bip": "",\r\n\t"bridge": "",\r\n\t"cgroup-parent": "",\r\n\t"containerd": "/run/containerd/containerd.sock",\r\n\t"containerd-namespace": "docker",\r\n\t"containerd-plugin-namespace": "docker-plugins",\r\n\t"data-root": "",\r\n\t"debug": true,\r\n\t"default-address-pools": [{\r\n\t\t\t"base": "172.30.0.0/16",\r\n\t\t\t"size": 24\r\n\t\t},\r\n\t\t{\r\n\t\t\t"base": "172.31.0.0/16",\r\n\t\t\t"size": 24\r\n\t\t}\r\n\t],\r\n\t"default-cgroupns-mode": "private",\r\n\t"default-gateway": "",\r\n\t"default-gateway-v6": "",\r\n\t"default-network-opts": {},\r\n\t"default-runtime": "runc",\r\n\t"default-shm-size": "64M",\r\n\t"default-ulimits": {\r\n\t\t"nofile": {\r\n\t\t\t"Hard": 64000,\r\n\t\t\t"Name": "nofile",\r\n\t\t\t"Soft": 64000\r\n\t\t}\r\n\t},\r\n\t"dns": [],\r\n\t"dns-opts": [],\r\n\t"dns-search": [],\r\n\t"exec-opts": [],\r\n\t"exec-root": "",\r\n\t"experimental": false,\r\n\t"features": {},\r\n\t"fixed-cidr": "",\r\n\t"fixed-cidr-v6": "",\r\n\t"group": "",\r\n\t"hosts": [],\r\n\t"proxies": {\r\n\t\t"http-proxy": "http://proxy.example.com:80",\r\n\t\t"https-proxy": "https://proxy.example.com:443",\r\n\t\t"no-proxy": "*.test.example.com,.example.org",\r\n\t},\r\n\t"icc": false,\r\n\t"init": false,\r\n\t"init-path": "/usr/libexec/docker-init",\r\n\t"insecure-registries": [],\r\n\t"ip": "0.0.0.0",\r\n\t"ip-forward": false,\r\n\t"ip-masq": false,\r\n\t"iptables": false,\r\n\t"ip6tables": false,\r\n\t"ipv6": false,\r\n\t"labels": [],\r\n\t"live-restore": true,\r\n\t"log-driver": "json-file",\r\n\t"log-level": "",\r\n\t"log-opts": {\r\n\t\t"cache-disabled": "false",\r\n\t\t"cache-max-file": "5",\r\n\t\t"cache-max-size": "20m",\r\n\t\t"cache-compress": "true",\r\n\t\t"env": "os,customer",\r\n\t\t"labels": "somelabel",\r\n\t\t"max-file": "5",\r\n\t\t"max-size": "10m"\r\n\t},\r\n\t"max-concurrent-downloads": 3,\r\n\t"max-concurrent-uploads": 5,\r\n\t"max-download-attempts": 5,\r\n\t"mtu": 0,\r\n\t"no-new-privileges": false,\r\n\t"node-generic-resources": [\r\n\t\t"NVIDIA-GPU=UUID1",\r\n\t\t"NVIDIA-GPU=UUID2"\r\n\t],\r\n\t"oom-score-adjust": 0,\r\n\t"pidfile": "",\r\n\t"raw-logs": false,\r\n\t"registry-mirrors": [],\r\n\t"runtimes": {\r\n\t\t"cc-runtime": {\r\n\t\t\t"path": "/usr/bin/cc-runtime"\r\n\t\t},\r\n\t\t"custom": {\r\n\t\t\t"path": "/usr/local/bin/my-runc-replacement",\r\n\t\t\t"runtimeArgs": [\r\n\t\t\t\t"--debug"\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\t"seccomp-profile": "",\r\n\t"selinux-enabled": false,\r\n\t"shutdown-timeout": 15,\r\n\t"storage-driver": "",\r\n\t"storage-opts": [],\r\n\t"swarm-default-advertise-addr": "",\r\n\t"tls": true,\r\n\t"tlscacert": "",\r\n\t"tlscert": "",\r\n\t"tlskey": "",\r\n\t"tlsverify": true,\r\n\t"userland-proxy": false,\r\n\t"userland-proxy-path": "/usr/libexec/docker-proxy",\r\n\t"userns-remap": ""\r\n}\n'})})]})}function d(t={}){const{wrapper:r}={...(0,o.R)(),...t.components};return r?(0,n.jsx)(r,{...t,children:(0,n.jsx)(p,{...t})}):p(t)}},28453:(t,r,e)=>{e.d(r,{R:()=>a,x:()=>i});var n=e(96540);const o={},s=n.createContext(o);function a(t){const r=n.useContext(s);return n.useMemo((function(){return"function"==typeof t?t(r):{...r,...t}}),[r,t])}function i(t){let r;return r=t.disableParentContext?"function"==typeof t.components?t.components(o):t.components||o:a(t.components),n.createElement(s.Provider,{value:r},t.children)}}}]);