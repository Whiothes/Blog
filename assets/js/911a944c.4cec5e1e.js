"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7051],{3390:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var s=t(74848),r=t(28453);const o={title:"Reduce Ubuntu Server",tags:["ubuntu"]},i=void 0,l={permalink:"/blog/2024/06/25/reduce-ubuntu-server",source:"@site/blog/2024/06-25-reduce-ubuntu-server.md",title:"Reduce Ubuntu Server",description:"0. Sizes for /boot and /boot/efi",date:"2024-06-25T00:00:00.000Z",tags:[{inline:!0,label:"ubuntu",permalink:"/blog/tags/ubuntu"}],readingTime:2.395,hasTruncateMarker:!0,authors:[],frontMatter:{title:"Reduce Ubuntu Server",tags:["ubuntu"]},unlisted:!1,prevItem:{title:"KVM \u8fd0\u884c\u5e76\u7f16\u8f91iso\u955c\u50cf\u6587\u4ef6",permalink:"/blog/2024/07/25/kvm"},nextItem:{title:"\u5b89\u88c5 Windows \u5982\u4f55\u8df3\u8fc7\u8d26\u53f7\u767b\u5f55[^1]",permalink:"/blog/2024/06/19/win-skip-netlogin"}},u={authorsImageUrls:[]},a=[{value:"0. Sizes for <code>/boot</code> and <code>/boot/efi</code>",id:"0-sizes-for-boot-and-bootefi",level:3},{value:"1. Install pre-installed ubuntu server",id:"1-install-pre-installed-ubuntu-server",level:3},{value:"2. <strong>Remove Unnecessary Packages</strong> (compile envionrment)",id:"2-remove-unnecessary-packages-compile-envionrment",level:3}];function c(e){const n={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h3,{id:"0-sizes-for-boot-and-bootefi",children:["0. Sizes for ",(0,s.jsx)(n.code,{children:"/boot"})," and ",(0,s.jsx)(n.code,{children:"/boot/efi"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"/boot Partition"}),": You could reduce the ",(0,s.jsx)(n.code,{children:"/boot"})," partition size to around ",(0,s.jsx)(n.strong,{children:"200 MB"}),". This should still be sufficient to hold the kernel and initramfs image. Be cautious, as going too small could lead to issues during unexpected updates or changes that might require space, such as security patches for the kernel."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"/boot/efi Partition"}),": The EFI System Partition (",(0,s.jsx)(n.code,{children:"/boot/efi"}),") typically doesn't require much space if you're only using a few boot loaders. A size of ",(0,s.jsx)(n.strong,{children:"100 MB"})," is often recommended as a minimum by many Linux distributions and should be more than adequate for most single-boot configurations."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"1-install-pre-installed-ubuntu-server",children:"1. Install pre-installed ubuntu server"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Download pre-installed ubuntu server: ",(0,s.jsx)(n.a,{href:"https://cdimage.ubuntu.com/ubuntu-server/noble/daily-preinstalled/current/",children:"Ubuntu Server 24.04 (Noble Numbat) Daily Build"})]}),"\n",(0,s.jsxs)(n.li,{children:["use ",(0,s.jsx)(n.a,{href:"https://help.ubuntu.com/community/mkusb",children:"mkusb - Community Help Wiki"})," to flash: ",(0,s.jsx)(n.code,{children:"dus xxx.tar.xz"})]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"2-remove-unnecessary-packages-compile-envionrment",children:["2. ",(0,s.jsx)(n.strong,{children:"Remove Unnecessary Packages"})," (compile envionrment)"]}),"\n",(0,s.jsx)(n.p,{children:"After installation, you can remove packages that are not necessary for your server's purpose:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"List installed packages:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"dpkg-query -W --showformat='${Installed-Size}\\t${Package}\\n' | awk '{print $1/1024 \" MB\\t\" $2}' | sort -n -r\n"})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var s=t(96540);const r={},o=s.createContext(r);function i(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);