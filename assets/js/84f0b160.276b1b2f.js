"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2164],{54761:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"TOC/computer/system/apue/ch03","title":"Chapter 3. File I/O","description":"3.10 File Sharing ##","source":"@site/docs/TOC/computer/system/apue/ch03.md","sourceDirName":"TOC/computer/system/apue","slug":"/TOC/computer/system/apue/ch03","permalink":"/docs/TOC/computer/system/apue/ch03","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 2. UNIX Standardization and Implementations","permalink":"/docs/TOC/computer/system/apue/ch02"},"next":{"title":"Chapter 4. Fiiles and Directories","permalink":"/docs/TOC/computer/system/apue/ch04"}}');var s=t(74848),r=t(28453);const d={},o="Chapter 3. File I/O",c={},a=[{value:"3.10 File Sharing",id:"310-file-sharing",level:2},{value:"3.11 Atomic Operations",id:"311-atomic-operations",level:2},{value:"<code>pread</code> and <code>pwrite</code> Fucntions",id:"pread-and-pwrite-fucntions",level:3},{value:"3.12 <code>dup</code> and <code>dup2</code> Functions",id:"312-dup-and-dup2-functions",level:2}];function l(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"chapter-3-file-io",children:"Chapter 3. File I/O"})}),"\n",(0,s.jsx)(n.h2,{id:"310-file-sharing",children:"3.10 File Sharing"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"v-node: contains information about the type of the file and pointers to function that operate on the file."}),"\n",(0,s.jsx)(n.li,{children:"i-node: contains all the information about the file."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"for a single process that has two different files open:\none file is open on standard input and the other is open on standard output"}),"\n",(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(56733).A+"",width:"743",height:"382"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Figure 3.7 Kernel data structure for open files"})})]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(93790).A+"",width:"743",height:"466"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Figure 3.8 Two independent processes with the same file open"})})]}),"\n",(0,s.jsx)(n.h2,{id:"311-atomic-operations",children:"3.11 Atomic Operations"}),"\n",(0,s.jsxs)(n.h3,{id:"pread-and-pwrite-fucntions",children:[(0,s.jsx)(n.code,{children:"pread"})," and ",(0,s.jsx)(n.code,{children:"pwrite"})," Fucntions"]}),"\n",(0,s.jsxs)(n.p,{children:["The Single UNIX Specification includes two functions that allow applications to seek and perform I/O atomically: ",(0,s.jsx)(n.code,{children:"pread"})," and ",(0,s.jsx)(n.code,{children:"pwrite"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"#include <unistd.h>\n\n/**\n * return: number of bytes read, 0 if end of file, -1 on error\n */\nssize_t pread(int fd, void *buf, size_t nbytes, off_t offset);\n\n/**\n * return: number of bytes write, 0 if end of file, -1 on error\n */\nssize_t pwrite(int fd, void *buf, size_t nbytes, off_t offset);\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"312-dup-and-dup2-functions",children:["3.12 ",(0,s.jsx)(n.code,{children:"dup"})," and ",(0,s.jsx)(n.code,{children:"dup2"})," Functions"]}),"\n",(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(13947).A+"",width:"743",height:"249"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Figure 3.9 Kernel data structures after dup(1)"})})]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},56733:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/03fig07-069c5e178f3b1da63e4a496dabd262c6.jpg"},93790:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/03fig08-a635251a9eebe7d8d4812ef8b566f186.jpg"},13947:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/03fig09-810a69a6df032558ddb7650442d3260a.jpg"},28453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>o});var i=t(96540);const s={},r=i.createContext(s);function d(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);