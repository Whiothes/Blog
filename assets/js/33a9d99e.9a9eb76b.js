"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3864],{73522:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>o});var s=n(12774),l=n(74848),a=n(28453);const r={title:"iptables port map",tags:["iptables","port map"]},i=void 0,p={authorsImageUrls:[]},o=[{value:"iptables port map",id:"iptables-port-map",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.h2,{id:"iptables-port-map",children:"iptables port map"}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsx)(t.li,{children:"\u9700\u8981\u5148\u5f00\u542flinux\u7684\u6570\u636e\u8f6c\u53d1\u529f\u80fd"}),"\n"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-sh",children:"$ vi /etc/sysctl.conf\uff0c\u5c06net.ipv4.ip_forward=0\u66f4\u6539\u4e3anet.ipv4.ip_forward=1\n$ sysctl -p  //\u4f7f\u6570\u636e\u8f6c\u53d1\u529f\u80fd\u751f\u6548\n"})}),"\n",(0,l.jsxs)(t.ol,{start:"2",children:["\n",(0,l.jsx)(t.li,{children:"\u66f4\u6539iptables\uff0c\u4f7f\u4e4b\u5b9e\u73b0nat\u6620\u5c04\u529f\u80fd"}),"\n"]}),"\n",(0,l.jsx)(t.p,{children:"\u5c06\u5916\u7f51\u8bbf\u95ee192.168.75.5\u768480\u7aef\u53e3\u8f6c\u53d1\u5230192.168.75.3:8000\u7aef\u53e3\u3002"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-sh",children:"$ iptables -t nat -A PREROUTING -d 192.168.75.5 -p tcp --dport 80 -j DNAT --to-destination 192.168.75.3:8000\n"})}),"\n",(0,l.jsx)(t.p,{children:"\u5c06192.168.75.3 8000\u7aef\u53e3\u5c06\u6570\u636e\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u65f6\uff0c\u5c06\u6e90ip\u6539\u4e3a192.168.75.5"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-sh",children:"$ iptables -t nat -A POSTROUTING -d 192.168.75.3 -p tcp --dport 8000 -j SNAT --to 192.168.75.5\n"})}),"\n",(0,l.jsxs)(t.ol,{start:"3",children:["\n",(0,l.jsx)(t.li,{children:"\u67e5\u770bnat\uff0c\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\uff1aiptables -t nat \u2013list\u68c0\u67e5nat\u5217\u8868\u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"references"}),"\n"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["[iptables\u5b9e\u73b0\u7aef\u53e3\u6620\u5c04][",(0,l.jsx)(t.a,{href:"https://www.cnblogs.com/dongzhiquan/p/11427461.html",children:"https://www.cnblogs.com/dongzhiquan/p/11427461.html"}),"]"]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>i});var s=n(96540);const l={},a=s.createContext(l);function r(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(a.Provider,{value:t},e.children)}},12774:e=>{e.exports=JSON.parse('{"permalink":"/blog/2022/10/11/2022/port-forward","source":"@site/blog/2022/2022-10-11-port-forward.md","title":"iptables port map","description":"iptables port map ##","date":"2022-10-11T00:00:00.000Z","tags":[{"inline":true,"label":"iptables","permalink":"/blog/tags/iptables"},{"inline":true,"label":"port map","permalink":"/blog/tags/port-map"}],"readingTime":0.795,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"iptables port map","tags":["iptables","port map"]},"unlisted":false,"prevItem":{"title":"execute multiple statements in an \\"if\\" statement","permalink":"/blog/2022/10/13/2022/elisp-if"},"nextItem":{"title":"SSSD and Active Directory","permalink":"/blog/2022/07/20/2022/ubuntu-AD-sssd"}}')}}]);